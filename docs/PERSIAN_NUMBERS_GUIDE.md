# راهنمای پشتیبانی از اعداد فارسی - Persian Numbers Support

## مشکل رایج کاربران ایرانی

کاربران ایرانی گاهی اوقات با کیبورد فارسی اعداد وارد می‌کنند که باعث مشکل در validation و ارسال SMS می‌شود.

## راه‌حل پیاده‌سازی شده

سیستم به طور خودکار اعداد فارسی را به انگلیسی تبدیل می‌کند:

### تبدیل خودکار اعداد

```
۰۹۱۲۳۴۵۶۷۸۹ → 09123456789
+۹۸۹۱۲۳۴۵۶۷۸۹ → +989123456789
۹۸۹۱۲۳۴۵۶۷۸۹ → 989123456789
```

### پشتیبانی از فرمت‌های مختلف

✅ **اعداد فارسی**: `۰۹۱۲۳۴۵۶۷۸۹`  
✅ **اعداد انگلیسی**: `09123456789`  
✅ **اعداد عربی**: `٠٩١٢٣٤٥٦٧٨٩`  
✅ **فرمت‌های مختلف**: `۰۹۱۲-۳۴۵-۶۷۸۹`

## نحوه کارکرد

### 1. تشخیص نوع عدد

سیستم تشخیص می‌دهد که آیا عدد فارسی است یا انگلیسی

### 2. تبدیل خودکار

اعداد فارسی به انگلیسی تبدیل می‌شوند

### 3. Validation

validation روی عدد تبدیل شده انجام می‌شود

### 4. ارسال SMS

SMS با عدد انگلیسی ارسال می‌شود

## مثال‌های کاربردی

### ثبت نام با شماره فارسی

```
کاربر وارد می‌کند: ۰۹۱۲۳۴۵۶۷۸۹
سیستم تبدیل می‌کند: 09123456789
SMS ارسال می‌شود به: 09123456789
```

### ورود با شماره فارسی

```
کاربر وارد می‌کند: +۹۸۹۱۲۳۴۵۶۷۸۹
سیستم تبدیل می‌کند: +989123456789
OTP ارسال می‌شود به: +989123456789
```

### فراموشی رمز عبور

```
کاربر وارد می‌کند: ۹۸۹۱۲۳۴۵۶۷۸۹
سیستم تبدیل می‌کند: 989123456789
کد بازیابی ارسال می‌شود به: 989123456789
```

## تست سیستم

### تست تبدیل اعداد

```typescript
import { testPersianNumberAuth } from '@/lib/util/testPersianNumbers';

// اجرای تست‌های تبدیل اعداد فارسی
testPersianNumberAuth();
```

### تست SMS با اعداد فارسی

```typescript
import { testSmsWithPersianNumbers } from '@/lib/util/testPersianNumbers';

// تست ارسال SMS با اعداد فارسی
testSmsWithPersianNumbers();
```

## صفحات پشتیبانی شده

✅ **صفحه ورود** - `/store/signin`  
✅ **صفحه ثبت نام** - `/store/signup`  
✅ **صفحه تایید کد** - `/store/otp`  
✅ **صفحه فراموشی رمز عبور** - `/store/forgot-password`

## ویژگی‌های اضافی

### Placeholder های بهبود یافته

```
"example@email.com یا 09123456789 یا ۰۹۱۲۳۴۵۶۷۸۹"
```

### Validation هوشمند

- تشخیص خودکار نوع عدد
- تبدیل خودکار اعداد فارسی
- Validation روی عدد تبدیل شده

### لاگ‌های مفصل

```
Input: ۰۹۱۲۳۴۵۶۷۸۹
Valid: ✅
Normalized: 09123456789
Was Converted: 🔄
```

## نکات مهم

⚠️ **توجه**: تبدیل فقط در validation و ارسال انجام می‌شود  
🔧 **توسعه**: از فایل‌های تست برای بررسی عملکرد استفاده کنید  
📱 **SMS**: اعداد فارسی در SMS به انگلیسی تبدیل می‌شوند  
🚀 **کاربری**: کاربران می‌توانند با هر فرمت عدد وارد کنند

## عیب‌یابی

### مشکل: Validation خطا می‌دهد

**راه حل**: مطمئن شوید `persianNumberConverter` import شده است

### مشکل: SMS ارسال نمی‌شود

**راه حل**: بررسی کنید که عدد به درستی تبدیل شده است

### مشکل: اعداد فارسی نمایش داده نمی‌شوند

**راه حل**: از `convertEnglishToPersian` برای نمایش استفاده کنید
